
单例模式总结

饿汉式:

优点： 类加载的时候就初始化，执行效率高，没有锁机制。

缺点： 不管用不用都在占用内存空间。如果有多个线程，太耗内存

懒汉式：

在方法上加锁，如果有多个线程同时访问，cpu分配压力加大，会导致多个线程处于阻塞状态，性能下降，这时候应该考虑双重检查锁
       
破坏单例的方法有两种：

1.可以利用反射拿到私有构造器，强制访问，然后暴力新建实例。

2.利用序列化和反序列化破坏单例

避免反射破坏单例，可以在私有构造器上用判断的方式，如果已经实例已经存在，返回异常

保存序列化的情况下也能使用单例,只需要增加readResolve()方法即可。

内部类单例

优点：及避免了饿汉式的内存浪费，也兼顾synchonized锁的性能问题

枚举类单例
静态代码块中直接给Instasce赋值，是典型的饿汉式单例。

容器式单例
写法适用于创建实例比较多的情况，便于管理，但不是线程安全的。

Thead线程式单例
单例模式为了达到线程安全的目的，都给方法加锁，已时间换空间，TheadLocal将所有对象都放到TheadLocalMap中，为线程提供一个对象，实际上是以空间换时间来实现线程间隔离的。
